<!DOCTYPE html>
<html>
<head>
  <title>Smart Expense Tracker</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
body {
    font-family: Arial, sans-serif;
    background: #f4f6f9;
    display: flex;
    justify-content: center;
}

.container {
    margin-top: 40px;
    background: white;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    width: 450px;
}

h1 {
    text-align: center;
}

input {
    padding: 8px;
    margin: 5px 0;
    width: 48%;
    border-radius: 6px;
    border: 1px solid #ccc;
}

button {
    padding: 8px 12px;
    border-radius: 6px;
    border: none;
    background: #007bff;
    color: white;
    cursor: pointer;
}

button:hover {
    background: #0056b3;
}
</style>
</head>
<body>
  <div class="container">
  <h1>Smart Expense Tracker</h1>

  <input type="text" id="category" placeholder="Category (Food, Travel)">
  <input type="number" id="amount" placeholder="Amount">
  <button onclick="addExpense()">Add Expense</button>

  <h3>Total: â‚¹<span id="total">0</span></h3>

  <canvas id="myChart" width="400" height="200"></canvas>

  <script>
    let expenses = [];
    let total = 0;
    let myChart;

    function addExpense() {
      let category = document.getElementById("category").value;
      let amount = parseInt(document.getElementById("amount").value);

      if (!category || !amount) {
        alert("Please fill all fields");
        return;
      }

      expenses.push({
        category: category.trim().toLowerCase(),
   amount: amount
});
      total += amount;
      document.getElementById("category").value = "";
document.getElementById("amount").value = "";

      document.getElementById("total").innerText = total;
      if (total > 5000) {
  alert("âš  You are exceeding your monthly budget!");
}

      updateChart();
    }

    function updateChart() {
      let categories = {};
      expenses.forEach(e => {
        categories[e.category] = (categories[e.category] || 0) + e.amount;
      });

      let labels = Object.keys(categories);
      let data = Object.values(categories);
      let chartTotal = data.reduce((a, b) => a + b, 0);
      console.log(categories);
      if (myChart) {
        console.log(categories);
    myChart.destroy();
}

      myChart = new Chart(document.getElementById("myChart"), {
    type: 'pie',
    data: {
        labels: labels,
        datasets: [{
            data: data
        }]
    },
    options: {
        plugins: {
            tooltip: {
                callbacks: {
                    label: function(context) {
                        let totalSum = context.dataset.data.reduce((a, b) => a + b, 0);
                        let value = context.raw;
                        let percentage = ((value / totalSum) * 100).toFixed(1);
                        return context.label + ": â‚¹" + value + " (" + percentage + "%)";
                    }
                }
            }
        }
    }
});
   if (categories["food"] && categories["food"] > 2000) {
    alert("ðŸ’¡ You are spending heavily on Food. Try reducing it.");
}
    }
  </script>
    </div>
</body>
</html>
